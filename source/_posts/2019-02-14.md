---
title: '什么是微服务'
catalog: true
date: 2019-02-14 02:14:42
subtitle:
header-img: "/img/header_img/weifuwu000-1.jpg"
categories:
- 技术
tags:
- 微服务
---

### 微服务定义

微服务是由单一应用程序构成的小服务，拥有自己的进程与轻量化处理，服务依业务功能设计，以全自动的方式部署，与其他服务用HTTP API通讯，服务会使用最小规模的集中管理技术（Docker），服务可以用不同的编程语言与数据库等。

### 单体应用

传统应用技术栈
* LAMP（Linux + Apache + MySQL  + PHP） 
* MVC（Spring + iBatis/Hibernate + Tomcat）

优点

* 学习成本低，开发上手快
* 测试，部署，运维方便

缺点

* 部署效率低下
* 团队协作开发成本高
* 系统高可用性能差
* 线上发布慢
 
 解决办法用服务化的思想
 
 ### 服务化
 
定义：服务化就是把传统的单机应用中通过JAR包依赖产生的本地方法调用，改造成通过RPC接口产生的远程方法调用。
 
***通过服务化，可以解决单体应用膨胀、团队开发耦合度高、协作效率低下等问题***

单体应用拆分成服务化的条件

第一阶段：项目的目标是快速开发和验证想法，证明产品思路是否可行。初级阶段产品设计的功能简单，适合采用快速迭代的方式，架构也不要过度设计。集中地进行开发、测试和运维。
第二阶段：项目经过一段时间的运营，需要增加更多的功能来完善产品。需要多功能混合开发、测试和部署，会导致不同的功能之间相互影响。部署上线需要所有的功能测试完成才能上线。此时需要对项目进行服务化拆分。

服务拆分的前置条件

* 服务如何定义（服务描述）
* 服务如何发布和订阅（注册中心）
* 服务如何监控（服务监控）
* 服务如何治理（服务治理）
* 故障如何定位（服务最总）

服务拆分的方式

* 纵向拆分，从业务纬度进行拆分。标准是按照业务的关联程度来决定，关联比较密切的业务适合拆分一个服务，功能相对比较独立的业务适合单独拆分为一个服务
* 横向拆分，从公共且独立功能纬度拆分。标准是按照是否有公共的被多个其他的服务调用，且依赖的资源独立不与其他业务耦合。
*


### 微服务

微服务组成架构

* 服务描述
* 注册中心
* 服务框架
* 服务监控
* 服务追踪
* 服务治理

优点

* 服务拆分粒度更细
* 服务独立部署
* 服务独立维护
* 服务治理能力要求高

缺点

* 团队必须掌握微服务原理才能开发
* 项目是分布式，项目结构复杂，增加部署难度
